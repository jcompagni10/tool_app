  <%= form_with(model: reservation, remote: true, html: {autocomplete: "off", id: "reservation_form"}) do |form| %>
    <div id="errorsWrapper">
        <%= render partial: 'formErrors', :locals => {reservation: @reservation} %>
    </div>
    <div class="row optionRow row-eq-height">
      <div class="col-sm-3 col-xs-6">
        <div class="optionBox">
          <a data-toggle="modal" data-target="#toolsModal">
            <%= image_tag("toolsIcon.jpg") %>
            <div class="optionTitle">Toolbox</div>
          </a>
        <input type="checkbox" checked onclick="return false">
        </div>
      </div>
      <div class="col-sm-3 col-xs-6">
        <div class="optionBox">
          <%= image_tag("ladderIcon.jpg", 'data-toggle' => "modal", 'data-target' => "#ladderModal") %>
          <div class="optionTitle">Ladder ($10)</div>
          <%= form.check_box :ladder, id: :reservation_ladder%>
        </div>
      </div>
      <div class="col-sm-3 col-xs-6">
        <div class="optionBox">
          <%= image_tag("lightIcon.jpg", 'data-toggle' => "modal", 'data-target' => "#lightModal") %>
          <div class="optionTitle">Light ($10)</div>
          <%= form.check_box :light, id: :reservation_light %>
        </div>
      </div>
      <div class="col-sm-3 col-xs-6">
          <div class="optionBox">
            <%= image_tag("deliveryIcon.jpg", 'data-toggle' => "modal", 'data-target' => "#deliveryModal") %>
            <div class="optionTitle">Delivery ($10)</div>
            <input type="checkbox" onChange ="toggleDelivery(this.checked)">
          </div>
      </div>
    </div>

    <div class="row">
      <div class="bottomInfo col-md-8 col-md-offset-2">
        <% if reserveLater %>
          <div class="reserveDate inputField">
            <%= form.label :start_date, "Rental Date: " %>
            <input type="hidden" id="reserve_ahead" name="reservation[reserve_ahead]" value="true">
            <%= form.text_field :start_date, {:id => "start_date", :readonly  => "true", :onChange => "updateDueDate(this.value)"} %>
            <% if availableToday %>
              <%= link_to 'Reserve Today', hideResDate_path, remote: true %>
            <% end %>
          </div>
          <script>
            $("#start_date").multidatepicker({
              minDate: new Date(),
              beforeShowDay: DisableSpecificDates
              })
          </script>
        <% end %>
        <div id= "deliveryInput" class="hidden">
          <div class="inputField">
            <%= form.label :delivery_time, "Desired Delivery Time: " %>
            <%# hash of possible delivery times in 24h %>
            <% delivery_times = { "9am" => 9, "10am" => 10, "11am" => 11, "12pm" => 12, "1pm" => 13, "2pm" => 14, "3pm" => 15, "4pm" => 16, "5pm" => 17, "6pm" => 18, "7pm" => 19, "8pm" => 20 } %>
            <%= form.select :delivery_time, delivery_times, {}, {:id => "delivery_time", :onChange => "deliveryChange()", :disabled => true}  %>
            &nbspâ€” <b><span id="deliveryEndTime">10am</span></b>
          </div>
          <div class="inputField">
            <%= form.label :address, "Address: " %>
            <%= form.text_field :address, id: :address %>
          </div>
          <div class="inputField">
            <%= form.label :instructions, "Special Instructions: " %>
            <%= form.text_field :instructions, id: :instructions %>
          </div>
        </div>
        <div class="inputField">
          <%= form.label :email, "Email: " %>
          <%= form.email_field :email, id: :reservation_email %>
        </div>
        <div class="inputField">
          <%= form.label :stripe, "Card: " %>
          <div id="card-element">
            <!-- a Stripe Element will be inserted here. -->
          </div>
          <div id="card-errors" role="alert"><%=flash[:error]%></div>
          <%= text_field_tag  "reservation[stripe]", nil, type: 'hidden', id: "reservation_stripe" %>
        </div>
        <div class="termsOfService">
          <%= form.check_box :tos, id: :reservation_tos %>
          <span>I agree to the <a href="#" data-toggle="modal" data-target="#tos"> Terms of Serivce </a></span> 
        </div>
        <div class="actions submitWrapper">
        <button id="submitButton" class="btn btn-primary" onClick ="tokenHandler(event)" disabled="true">Reserve Now </button>
        </div>
      </div>
    </div>
  <% end %>




<script>
mountStripe()
</script>